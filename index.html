<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Nunito:wght@700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#ffe6ea;
    --grid:#fddbe0;
    --ink:#111;
    --pill:#ff5a71;
    --pill-dark:#e04457;
    --panel:#fff7e9;
    --panel-line:#222;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    font-family:'Baloo 2',system-ui;
    background:var(--bg);
    overflow:hidden;
  }
  /* pink grid */
  .grid{position:fixed;inset:0;pointer-events:none;
    background:
      linear-gradient(to right,var(--grid) 1px,transparent 1px) 0 0/40px 40px,
      linear-gradient(to bottom,var(--grid) 1px,transparent 1px) 0 0/40px 40px;
    opacity:.75;
  }

  /* bunting flags top */
  .bunting{position:fixed; left:0; right:0; top:0; height:120px; pointer-events:none; z-index:1}
  .bunting svg{width:100%; height:100%}

  /* Stage */
  .stage{position:relative; width:min(1200px,100vw); height:min(675px,56.25vw); margin:clamp(8px,3vh,24px) auto 0}
  .left{position:absolute; left:5%; top:10%; display:flex; flex-direction:column; gap:16px}
  .right{position:absolute; right:6%; top:12%;}

  /* Pills / button */
  .pill{display:inline-flex; align-items:center; justify-content:center; gap:10px;
    padding:12px 22px; border-radius:999px; background:var(--pill); color:#000;
    border:3px solid #000; box-shadow:0 10px 0 #00000020, inset 0 -5px 0 var(--pill-dark);
    font-family:'Nunito'; font-weight:900; cursor:pointer; user-select:none;
  }

  /* Title letters */
  .title{line-height:.9; filter: drop-shadow(0 6px 0 #00000020)}
  .letters{display:flex; gap:6px; align-items:flex-end; flex-wrap:wrap}
  .ch{
    display:inline-block; font-weight:800;
    font-size: clamp(40px, 7vw, 96px);
    color:#ff5a71; -webkit-text-stroke:3px #000; text-stroke:3px #000;
    opacity:0; transform: translateY(40px);
  }
  .capwhite{
    background:#fff; color:#111; border:3px solid #000; border-radius:10px 10px 18px 18px;
    padding:2px 10px; box-shadow:0 6px 0 #00000020;
  }

  /* party hat on Y */
  .hat{
    position:absolute; width: clamp(26px, 4vw, 48px); aspect-ratio:1/1;
    border:3px solid #000; border-radius:6px 6px 22px 6px;
    background: conic-gradient(from 40deg, #0b2a4a 0 60%, #ff5a71 0 100%);
    transform-origin: 60% 100%;
    animation: hat-wiggle 2.2s ease-in-out infinite;
  }
  @keyframes hat-wiggle{
    0%,100%{ transform: translateY(-65%) rotate(10deg)}
    50%{ transform: translateY(-62%) rotate(18deg)}
  }

  /* Avatar + name tag */
  .avatar{width: clamp(260px, 36vw, 380px); height: clamp(260px, 36vw, 380px);
    border-radius:50%; overflow:hidden; border:8px solid #000; background:#ddd center/cover no-repeat;
    box-shadow:0 16px 0 #00000010, 0 0 0 8px #00000008 inset; opacity:0; transform:scale(.85)}
  .nameTag{position:absolute; bottom:-36px; left:50%; transform:translateX(-50%);
    padding:10px 22px; border-radius:999px; background:var(--pill); border:3px solid #000;
    box-shadow:0 8px 0 #00000020, inset 0 -4px 0 var(--pill-dark);
    font-family:'Nunito'; font-weight:900; opacity:0; }

  /* Sparkles (blink on/off) */
  .sparkle{position:fixed; pointer-events:none; font-size:26px; opacity:0;
    text-shadow:0 0 10px #fff6, 0 0 18px #ffd7; z-index:2}

  /* Modal */
  .modalBack{position:fixed; inset:0; background:#0006; display:none; align-items:center; justify-content:center; z-index:10}
  .card{width:min(860px,92vw); background:var(--panel); color:#222; border-radius:22px;
    border:6px solid #fff; outline:4px solid var(--panel-line); padding:18px 22px 24px; position:relative}
  .closeX{position:absolute; right:8px; top:6px; width:34px; height:34px; border-radius:50%; background:#fff; border:2px solid #222;
    display:grid; place-items:center; font-weight:900; cursor:pointer}
  .post{display:grid; grid-template-columns:1fr 1fr; gap:16px; align-items:stretch; min-height:360px}
  .leftSticker{background:#ffe6ea; border:3px solid #222; border-radius:16px; display:grid; place-items:center; padding:12px;
    background-image:radial-gradient(#ffced9 1px, transparent 1px); background-size:16px 16px}
  .big-emoji{font-size:120px}
  .rightMsg{border-left:3px solid #222; padding:8px 8px 8px 18px; position:relative; font-family:'Nunito'}
  .rightMsg h3{margin:6px 0 12px; font-family:'Baloo 2'; font-size:28px}
  .rightMsg p{margin:0; font-size:18px; line-height:1.55; white-space:pre-wrap}

  /* Gate (gift + input) */
  .gate{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:var(--bg); z-index:20}
  .gateBox{display:flex; flex-direction:column; align-items:center; gap:16px}
  .gift{width:140px; height:140px; border-radius:18px; border:4px solid #000; background:
        linear-gradient(#ff9db0,#ff5a71); position:relative; cursor:pointer; box-shadow:0 12px 0 #00000020}
  .gift::before{content:""; position:absolute; inset:0; background:linear-gradient(90deg,#0000 45%, #fff 45% 55%, #0000 55%)}
  .ribbon{position:absolute; top:-26px; left:50%; width:90px; height:40px; background:#ff5a71; border:4px solid #000; border-radius:12px;
    transform:translateX(-50%) rotate(-6deg)}
  .msg{font-family:'Nunito'; font-weight:900; color:#000; background:#fff; border:3px solid #000; padding:8px 14px; border-radius:999px}
  .ask{display:flex; flex-direction:column; gap:10px; align-items:center}
  .ask input{padding:10px 12px; border-radius:10px; border:3px solid #000; font-size:16px; font-family:'Nunito'; width:min(260px,70vw)}
  .err{font-family:'Nunito'; font-weight:900; color:#000; background:#fff; border:3px solid #000; padding:6px 10px; border-radius:12px}

  @media (max-width:900px){
    .post{grid-template-columns:1fr}
    .rightMsg{border-left:none; border-top:3px solid #222; padding-top:14px}
  }
</style>
</head>
<body>
  <div class="grid"></div>

  <!-- bunting -->
  <div class="bunting">
    <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
      <path d="M0,40 Q300,100 600,40 T1200,40" fill="none" stroke="#ff5a71" stroke-width="8"/>
      <defs>
        <g id="flag">
          <polygon points="40,40 80,40 60,90" fill="#ff5a71" stroke="#000" stroke-width="3"/>
          <polygon points="100,40 140,40 120,90" fill="#ffd4db" stroke="#000" stroke-width="3"/>
          <polygon points="160,40 200,40 180,90" fill="#ff5a71" stroke="#000" stroke-width="3"/>
        </g>
      </defs>
      <use href="#flag" x="0"/><use href="#flag" x="240"/><use href="#flag" x="480"/><use href="#flag" x="720"/><use href="#flag" x="960"/>
    </svg>
  </div>

  <!-- Gate -->
  <div class="gate" id="gate">
    <div class="gateBox">
      <div class="gift" id="gift"><div class="ribbon"></div></div>
      <div class="msg" id="gateMsg">Open it üéÅ</div>
      <div class="ask" id="ask" style="display:none">
        <div class="msg" id="askTitle">Enter your name</div>
        <input id="nameInput" placeholder="Type here..." />
        <div class="err" id="err" style="display:none"></div>
      </div>
    </div>
  </div>

  <!-- Main scene -->
  <div class="stage" id="scene" style="visibility:hidden">
    <div class="left">
      <div class="title">
        <div class="letters" id="happy"></div>
        <div class="letters" id="birthday"></div>
      </div>

      <div class="pill" id="openCard">Click here <span class="bestieFirst">Likki Bondam</span> üíå</div>
    </div>

    <div class="right">
      <div class="avatar" id="avatar"><img src="bestie.jpg" style="width:100%;height:100%;object-fit:cover" alt=""></div>
      <div class="nameTag" id="nameTag"><span class="bestieName">Likhitha</span> ‚ô•</div>
    </div>
  </div>

  <!-- sparkle layer -->
  <div id="sparkLayer"></div>

  <!-- Popup -->
  <div class="modalBack" id="modal">
    <div class="card" role="dialog" aria-modal="true">
      <div class="closeX" id="closeX">‚úï</div>
      <div class="post">
        <div class="leftSticker"><div class="big-emoji">üê∞‚ù§Ô∏è</div></div>
        <div class="rightMsg">
          <h3 id="typeTitle"></h3>
          <p id="typeBody"></p>
        </div>
      </div>
    </div>
  </div>

<script>
/* ---------- CONFIG (edit these) ---------- */
const CONFIG = {
  bestieName: "Likhitha",
  buttonName: "Likki Bondam",
  photoPath: "bestie.jpg?v=2",             // cache-bust if you replace the photo
  unlockWord: "bondam",                    // case-insensitive
  titleHappy: "Happy",
  titleBirthday: "Birthday",
  typeTitle: "To you üíñ",
  typeBody: `My love, you are a very special girl. I silently thank you for coming into my life.
Today, I wish you all the best, lots of health, and lots of joy. I hope we‚Äôll celebrate many more birthdays like this together.
Happy birthday to you. I love you. üíó`,
  sparkleSet: ["‚ú®","üåü","üíñ","üí´","üíû"],
  sparklesPerSecond: 10
};

/* ---------- Gate logic ---------- */
const gift = document.getElementById('gift');
const gate = document.getElementById('gate');
const gateMsg = document.getElementById('gateMsg');
const ask = document.getElementById('ask');
const askTitle = document.getElementById('askTitle');
const err = document.getElementById('err');
const nameInput = document.getElementById('nameInput');
let wrongCount = 0;
gift.addEventListener('click', ()=>{
  gateMsg.style.display='none';
  ask.style.display='flex';
  nameInput.focus();
});
nameInput.addEventListener('keydown', (e)=>{
  if(e.key==='Enter'){
    const v = (nameInput.value||'').trim().toLowerCase();
    err.style.display='none';
    if(v === CONFIG.unlockWord.toLowerCase()){
      // unlock
      gate.style.display='none';
      startScene();
    }else{
      wrongCount++;
      askTitle.style.display='none';
      if(wrongCount===1) err.textContent = "ehe ne name kadhu  nen pettindi";
      else err.textContent = "hehe oorike cheppa le.. nen pettindi kadhu nuv nannu pilchedhi";
      err.style.display='block';
      nameInput.select();
    }
  }
});

/* ---------- Scene + animations ---------- */
const scene = document.getElementById('scene');
const happy = document.getElementById('happy');
const birthday = document.getElementById('birthday');

function buildLetters(container, word, whiteBox=false){
  container.innerHTML='';
  [...word].forEach((ch,i)=>{
    const span = document.createElement('span');
    span.className='ch';
    if(whiteBox){ span.classList.add('capwhite'); }
    span.textContent = ch === ' ' ? '\u00A0' : ch;
    container.appendChild(span);
  });
}

function animateLetters(container, after){
  const letters = [...container.querySelectorAll('.ch')];
  letters.forEach((el,i)=>{
    setTimeout(()=>{
      el.style.transition = 'transform .5s cubic-bezier(.17,.67,.27,1.35), opacity .5s';
      el.style.transform = 'translateY(0)';
      el.style.opacity = '1';
      // small bounce
      setTimeout(()=>{ el.style.transform='translateY(-6px)'; }, 500);
      setTimeout(()=>{ el.style.transform='translateY(0)'; }, 700);
      // attach hat on Y of "Birthday"
      if(container.id==='birthday' && (el.textContent.toLowerCase()==='y')){
        attachHat(el);
      }
    }, 120*i);
  });
  if(after){
    setTimeout(after, 120*letters.length + 200);
  }
}

function attachHat(letterEl){
  const hat = document.createElement('div');
  hat.className='hat';
  letterEl.style.position='relative';
  letterEl.appendChild(hat);
  hat.style.left='55%';
  hat.style.top='0';
}

/* Avatar reveal */
const avatar = document.getElementById('avatar');
const nameTag = document.getElementById('nameTag');
function revealAvatar(){
  const img = avatar.querySelector('img');
  img.src = CONFIG.photoPath;
  setTimeout(()=>{
    avatar.style.transition='opacity 1.2s ease, transform 1.2s ease';
    nameTag.style.transition='opacity .9s ease .5s';
    avatar.style.opacity='1';
    avatar.style.transform='scale(1)';
    nameTag.style.opacity='1';
  }, 100);
}

/* Sparkles (blink on/off) */
const sparkLayer = document.getElementById('sparkLayer');
function sparkle(){
  const s = document.createElement('div');
  s.className = 'sparkle';
  s.textContent = CONFIG.sparkleSet[Math.floor(Math.random()*CONFIG.sparkleSet.length)];
  const x = Math.random()*innerWidth, y = Math.random()*innerHeight;
  s.style.left = x+'px'; s.style.top = y+'px';
  s.style.transform = `scale(${0.6+Math.random()*1.1}) rotate(${Math.random()*40-20}deg)`;
  sparkLayer.appendChild(s);
  requestAnimationFrame(()=> s.style.transition='opacity .18s ease'); // enable
  s.style.opacity='1';
  setTimeout(()=> s.style.opacity='0', 350 + Math.random()*350);
  setTimeout(()=> s.remove(), 900);
}
let sparkleTimer;

/* Start full scene */
function startScene(){
  scene.style.visibility='visible';

  // words
  buildLetters(happy, CONFIG.titleHappy, true);
  buildLetters(birthday, CONFIG.titleBirthday, false);

  animateLetters(happy, ()=>{
    animateLetters(birthday, ()=>{
      revealAvatar();
    });
  });

  // button text & name
  document.querySelector('.bestieName').textContent = CONFIG.bestieName;
  document.querySelector('.bestieFirst').textContent = CONFIG.buttonName;

  // sparkles loop
  sparkleTimer = setInterval(sparkle, 1000/CONFIG.sparklesPerSecond);
}

/* ---------- Popup with typewriter ---------- */
const modal = document.getElementById('modal');
const openCard = document.getElementById('openCard');
const closeX = document.getElementById('closeX');
const typeTitle = document.getElementById('typeTitle');
const typeBody = document.getElementById('typeBody');

function typeWriter(el, text, speed=28, cb){
  el.textContent='';
  let i=0;
  const t = setInterval(()=>{
    el.textContent += text[i++];
    if(i>=text.length){ clearInterval(t); cb && cb(); }
  }, speed);
}

openCard.addEventListener('click', ()=>{
  modal.style.display='flex';
  // type "To you" first, then body
  typeWriter(typeTitle, CONFIG.typeTitle, 42, ()=>{
    typeWriter(typeBody, CONFIG.typeBody, 18);
  });
});
closeX.addEventListener('click', ()=> modal.style.display='none');
modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.style.display='none'; });
document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && modal.style.display==='flex') modal.style.display='none'; });

</script>
</body>
</html>
