<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700;800&family=Nunito:wght@700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<style>
  :root{
    --ink:#0d1324;            /* deep night */
    --night:#0b1020;          /* bg */
    --night-2:#121936;        /* bg grad */
    --glow:#ffd166;           /* golden glow */
    --accent:#ff5a71;         /* warm red for pills */
    --accent-dark:#d7465a;
    --panel:#fff7e9;
    --panel-line:#222;
  }

  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    background: radial-gradient(1200px 700px at 30% -10%, #1b2145 0%, transparent 60%),
                linear-gradient(#0b1020, #121936);
    font-family: 'Baloo 2', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    overflow:hidden;
    color:#f5f7ff;
  }

  /* Star canvas + moon */
  #sky{position:fixed; inset:0; z-index:-2}
  .moon{
    position:fixed; right:5%; top:6%;
    width:min(160px,18vw); aspect-ratio:1/1; border-radius:50%;
    background:
      radial-gradient(circle at 35% 35%, #fff 0 30%, #ffe9b3 55%, #f3d78a 70%, transparent 71%),
      radial-gradient(circle at 70% 70%, #00000030 0 60%, transparent 61%);
    box-shadow: 0 0 60px 20px #ffe9b380, 0 0 140px 60px #ffe9b320;
    filter: saturate(1.05);
    z-index:-1;
  }

  .stage{
    position:relative;
    width:min(1200px,100vw);
    height:min(675px,56.25vw);    /* 16:9 */
    margin:clamp(8px,3vh,24px) auto 0;
  }

  .left{
    position:absolute; left:5%; top:8%;
    display:flex; flex-direction:column; gap:18px;
    text-shadow: 0 0 18px #ffe9b360;
  }

  .title{ line-height:.9; display:flex; flex-direction:column; }
  .word{ display:flex; align-items:center; gap:12px }
  .cap{
    background:linear-gradient(#fff,#f6f8ff);
    color:#111; border:3px solid #000;
    border-radius:10px 10px 18px 18px;
    padding:4px 12px;
    font-size: clamp(40px, 7vw, 96px);
    font-weight:800;
    box-shadow: 0 10px 0 #00000030;
  }
  .party{
    width: clamp(28px, 4.2vw, 52px); height: clamp(28px, 4.2vw, 52px);
    border:3px solid #000; border-radius: 6px 6px 24px 6px;
    background: conic-gradient(from 40deg, #1e2b57 0 60%, #ff5a71 0 100%);
    transform: rotate(12deg); position:relative;
  }
  .party::after{ content:""; position:absolute; right:-7px; top:-7px; width:10px; height:10px; background:#000; border-radius:50% }

  .big{
    color:#ff5a71; -webkit-text-stroke:3px #000; text-stroke:3px #000;
    font-size: clamp(40px, 7vw, 96px); font-weight:800; letter-spacing:1px;
    filter: drop-shadow(0 8px 0 #00000035);
  }

  .pill{
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
    padding:12px 22px; border-radius:999px; width:fit-content;
    border:3px solid #000; background:var(--accent);
    color:#000; font-weight:900; font-family:'Nunito';
    box-shadow: 0 10px 0 #00000025, inset 0 -5px 0 var(--accent-dark);
  }
  .pill .star{ filter: drop-shadow(0 0 8px #fff6a0) }
  .cta{ cursor:pointer; user-select:none }
  .cta.small{ padding:10px 18px; font-size:16px }

  .right{
    position:absolute; right:6%; top:12%;
    display:flex; align-items:center; justify-content:center;
  }
  .avatar{
    width: clamp(260px, 36vw, 380px); height: clamp(260px, 36vw, 380px);
    border-radius:50%; overflow:hidden; border:8px solid #000;
    box-shadow: 0 16px 0 #00000030, 0 0 0 8px #00000010 inset;
    background:#222 center/cover no-repeat;
  }
  .nameTag{
    position:absolute; bottom:-38px; left:50%; transform:translateX(-50%);
    padding:10px 22px; border-radius:999px; background:#242a4f; color:#ffe9b3;
    border:3px solid #000; font-family:'Nunito'; font-weight:900; display:flex; gap:10px;
    box-shadow: 0 10px 0 #00000035, 0 0 24px #ffe9b360 inset;
  }

  /* Glitter sparkles */
  .sparkle{
    position:fixed; pointer-events:none; z-index:1;
    font-size:28px; opacity:0; will-change: transform, opacity;
    text-shadow: 0 0 12px #fff8, 0 0 22px #ffe9b3a0;
  }

  /* Modal */
  .modalBack{
    position:fixed; inset:0; background:#0009; display:none;
    align-items:center; justify-content:center; z-index:10;
  }
  .card{
    width:min(860px, 92vw); background:var(--panel); color:#222;
    border-radius:22px; border:6px solid #fff; outline:4px solid var(--panel-line);
    padding:18px 22px 24px; box-shadow:0 18px 40px #00000080; position:relative;
  }
  .closeX{
    position:absolute; right:8px; top:6px; width:36px; height:36px; border-radius:50%;
    background:#fff; border:2px solid #222; display:grid; place-items:center;
    cursor:pointer; font-weight:900; z-index:2;
  }
  .post{ display:grid; grid-template-columns:1fr 1fr; gap:16px; align-items:stretch; min-height:360px }
  .leftSticker{
    background:#ffe6ea; border-radius:16px; border:3px solid #222;
    display:grid; place-items:center; padding:12px;
    background-image: radial-gradient(#ffced9 1px, transparent 1px); background-size:16px 16px;
  }
  .big-emoji{ font-size:120px }
  .rightMsg{ border-left:3px solid #222; padding:8px 8px 8px 18px; position:relative; font-family:'Nunito' }
  .rightMsg h3{ margin:6px 0 12px; font-family:'Baloo 2'; font-size:28px }
  .rightMsg p{ margin:0; font-size:18px; line-height:1.55 }
  .corner{ position:absolute; right:-8px; top:-8px; font-size:42px; transform:rotate(10deg) }

  .credit{
    position:fixed; bottom:8px; left:50%; transform:translateX(-50%);
    font-size:12px; opacity:.8; color:#c9d1ff; font-family:'Nunito'
  }

  @media (max-width:900px){
    .post{ grid-template-columns:1fr }
    .rightMsg{ border-left:none; border-top:3px solid #222; padding-top:14px }
  }
</style>
</head>
<body>
<canvas id="sky"></canvas>
<div class="moon" aria-hidden="true"></div>

<div class="stage">
  <div class="left">
    <div class="title">
      <div class="word" id="happy">
        <span class="cap">Happy</span>
        <span class="party" aria-hidden="true"></span>
      </div>
      <div class="big" id="birthday">Birthday</div>
    </div>

    <div class="pill" id="dob"><span class="star">‚òÖ</span><span class="dateText"></span><span class="star">‚òÖ</span></div>
    <div class="pill cta small" id="openCard">Click here <span class="bestieFirst"></span> üíå</div>
  </div>

  <div class="right">
    <div class="avatar" id="avatar">
      <img src="bestie.jpg" alt="Bestie" style="width:100%;height:100%;object-fit:cover">
    </div>
    <div class="nameTag" id="nameTag">üòä <span class="bestieName"></span> <span>‚ô•</span></div>
  </div>
</div>

<!-- glitter layer -->
<div id="sparkLayer"></div>

<!-- Popup -->
<div class="modalBack" id="modal" aria-hidden="true">
  <div class="card" role="dialog" aria-modal="true">
    <button class="closeX" id="closeX" aria-label="Close">‚úï</button>
    <div class="post">
      <div class="leftSticker"><div class="big-emoji">üê∞‚ù§Ô∏è</div></div>
      <div class="rightMsg">
        <h3>To you <span>üíñ</span></h3>
        <p id="messageText"></p>
        <div class="corner">üê±</div>
      </div>
    </div>
  </div>
</div>

<div class="credit">Made with ‚ù§Ô∏è in VS Code</div>

<script>
/* ======= CONFIG (edit these) ======= */
const CONFIG = {
  bestieName: "Likhitha",
  bestieFirst: "Likhitha",
  birthdayText: "12 September 2000",
  photoPath: "bestie.jpg",
  popupMessage:
    "My love, you are a very special girl. I silently thank you for coming into my life.\n" +
    "Today, I wish you all the best, lots of health, and lots of joy. I hope we‚Äôll celebrate many more birthdays like this together.\n" +
    "Happy birthday to you. I love you. üíñ",
  sparkleEmojis: ["‚ú®","üåü","üí´","ü™Ñ"],
  sparklePerSecond: 8,     // how many glitter pops per second
  duration: 1.0            // overall animation speed (lower is faster)
};

/* ======= Apply text & image ======= */
document.querySelectorAll(".bestieName").forEach(el=>el.textContent=CONFIG.bestieName);
document.querySelectorAll(".bestieFirst").forEach(el=>el.textContent=CONFIG.bestieFirst);
document.querySelector(".dateText").textContent = CONFIG.birthdayText;
document.querySelector("#avatar img").src = CONFIG.photoPath;
document.getElementById("messageText").textContent = CONFIG.popupMessage;

/* ======= Starry sky (canvas twinkles) ======= */
const sky = document.getElementById('sky');
const ctx = sky.getContext('2d');
let stars = [], W, H;

function resize(){
  W = sky.width = window.innerWidth;
  H = sky.height = window.innerHeight;
  stars = [];
  const count = Math.floor((W*H)/12000); // density
  for(let i=0;i<count;i++){
    stars.push({
      x: Math.random()*W,
      y: Math.random()*H,
      r: Math.random()*1.2 + 0.3,
      a: Math.random()*1,
      s: Math.random()*0.02 + 0.005 // twinkle speed
    });
  }
}
window.addEventListener('resize', resize);
resize();

function drawStars(){
  ctx.clearRect(0,0,W,H);
  for (const st of stars){
    st.a += st.s;
    const alpha = 0.4 + 0.6 * Math.abs(Math.sin(st.a));
    ctx.beginPath();
    ctx.arc(st.x, st.y, st.r, 0, Math.PI*2);
    ctx.fillStyle = `rgba(255, 230, 180, ${alpha})`;
    ctx.fill();
  }
  requestAnimationFrame(drawStars);
}
drawStars();

/* ======= Title & avatar entrance ======= */
const tl = gsap.timeline({ defaults:{ ease:"back.out(1.8)" } });
tl.from("#happy",{y:120,opacity:0,duration:.9*CONFIG.duration})
  .from("#birthday",{y:140,opacity:0,duration:1.0*CONFIG.duration},"-=0.5")
  .from("#dob",{y:80,opacity:0,duration:.7*CONFIG.duration},"-=0.4")
  .from("#avatar",{x:200,scale:.6,opacity:0,duration:.9*CONFIG.duration},"-=0.6")
  .from("#nameTag",{y:40,opacity:0,duration:.6*CONFIG.duration},"-=0.5")
  .from("#openCard",{y:40,opacity:0,duration:.6*CONFIG.duration},"-=0.5");
gsap.to("#avatar",{y:6,duration:2.5,yoyo:true,repeat:-1,ease:"sine.inOut"});
gsap.to("#nameTag",{y:3,duration:2,yoyo:true,repeat:-1,ease:"sine.inOut"});

/* ======= Glitter sparkles (appear, glitter, vanish) ======= */
const sparkLayer = document.getElementById('sparkLayer');
function spawnSparkle(){
  const s = document.createElement('div');
  s.className = 'sparkle';
  s.textContent = CONFIG.sparkleEmojis[Math.floor(Math.random()*CONFIG.sparkleEmojis.length)];
  const x = Math.random()*window.innerWidth;
  const y = Math.random()*window.innerHeight;
  s.style.left = x + 'px';
  s.style.top  = y + 'px';
  s.style.transform = 'scale(0.2) rotate('+(Math.random()*60-30)+'deg)';
  sparkLayer.appendChild(s);
  gsap.to(s, {opacity:1, duration:0.25});
  gsap.to(s, {
    keyframes:[
      {scale:1.1, duration:0.5, ease:"back.out(2)"},
      {scale:0.9, duration:0.3, ease:"sine.inOut"},
      {scale:0, opacity:0, duration:0.6, ease:"power1.in"}
    ],
    onComplete: ()=> s.remove()
  });
}
setInterval(spawnSparkle, 1000/CONFIG.sparklePerSecond);

/* ======= Popup interactions (robust close) ======= */
const openCard = document.getElementById("openCard");
const modal    = document.getElementById("modal");
const closeX   = document.getElementById("closeX");

function openModal(){
  modal.style.display = "flex";
  modal.setAttribute('aria-hidden','false');
  if (window.gsap) {
    gsap.fromTo(".card",{scale:.85,opacity:0},{scale:1,opacity:1,duration:.35,ease:"back.out(1.8)"});
  }
}
function closeModal(){
  const hide = ()=>{ modal.style.display="none"; modal.setAttribute('aria-hidden','true'); };
  if (window.gsap) {
    gsap.to(".card",{scale:.9,opacity:0,duration:.25,onComplete:hide});
  } else { hide(); }
}

// Attach listeners (and stop bubbling from the inner card so outside-click works)
openCard.addEventListener("click", openModal);
closeX.addEventListener("click", (e)=>{ e.stopPropagation(); closeModal(); });
modal.addEventListener("click", (e)=>{ if(e.target===modal) closeModal(); });
document.addEventListener("keydown", (e)=>{ if(e.key==="Escape" && modal.style.display==="flex") closeModal(); });
</script>
</body>
</html>
